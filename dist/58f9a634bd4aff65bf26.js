const animateValue=async(e,t,n)=>{e.innerHTML=1..toFixed(2)+"×",setButtonValue(n,"cashout"),await sleep(5e3);for(let n=1;n<=100*(t-1);n++)await sleep(1/(.2*n+1)*1e3),e.innerHTML=(1+n/100).toFixed(2)+"×";e.style.color="#C41E3A",document.getElementById("bet-amount").value="",resetShipAnimation(),setButtonValue(n,"run")},sleep=e=>new Promise((t=>setTimeout(t,e))),setButtonValue=(e,t)=>{e.name=t,e.innerHTML=t};let currBet=0;function runSim(){const e=document.getElementById("runSimButton"),t=document.getElementById("bet-amount"),n=document.getElementById("bank-val");if("cashout"===e.name)return cashout(t,n),void setButtonValue(e,"cashed out");if("cashed out"===e.name)return void displayAlert("Crash is Running.","Please wait for the round to end");if(""==t.value||t.value<=0||t.value>parseFloat(n.innerHTML))return void displayAlert("Invalid.","Please Enter a Valid Bet Amount");currBet=t.value,n.innerHTML=(n.innerHTML-currBet).toFixed(2);const a=document.getElementById("counter");a.style.color="rgba(199, 210, 254)",getFactor(document.getElementById("init-crash").value,document.getElementById("growth-rate").value,a,e)}const cashout=(e,t)=>{const n=parseFloat(document.getElementById("counter").innerHTML);displayAlert("Cashed out at "+parseFloat(document.getElementById("counter").innerHTML)+"x.","Gained "+parseFloat(currBet)*n+" Space Coins"),t.innerText=(parseFloat(t.innerText)+parseFloat(currBet)*n).toFixed(2),e.value=""},getFactor=(e,t,n,a)=>{""===e&&(e=33),""===t&&(t=1),axios.get("/crash?div="+e+"&g="+t).then((e=>{startShipAnimation(),animateValue(n,Math.round(100*e.data)/100,a)})).catch((e=>{console.log(e)}))};